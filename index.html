<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burgherr WebApp</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=MedievalSharp&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Moderne Farbpalette: Ged√§mpft, aber sauber */
            --bg-body: #2b2b2b;       /* Dunkelgrau statt braun */
            --bg-panel: #fdf6e3;      /* Helles Creme (Solarized Light Stil) */
            --primary: #8b5e3c;       /* Leder-Braun */
            --primary-dark: #5d4037;
            --accent: #d32f2f;        /* Rot f√ºr Wichtiges */
            --text-main: #333333;     /* Dunkles Grau f√ºr Text */
            --text-light: #fdf6e3;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Lato', sans-serif; /* Standard: Gut lesbar */
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            height: 100vh;
            display: flex;
            justify-content: center;
        }

        #app {
            background-color: var(--bg-panel);
            width: 100%;
            max-width: 1200px;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- HEADER --- */
        header {
            background-color: var(--primary);
            color: var(--text-light);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            z-index: 10;
        }

        h1 {
            font-family: 'MedievalSharp', cursive; /* Flair bleibt im Titel */
            margin: 0;
            font-size: 1.8rem;
            letter-spacing: 1px;
        }

        .resource-bar {
            display: flex;
            gap: 25px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .res span { margin-left: 5px; }

        /* --- MAIN LAYOUT --- */
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Sidebar Links & Rechts */
        aside {
            width: 260px;
            background-color: #f4ecd8;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #dccbb1;
        }

        aside.right {
            border-right: none;
            border-left: 1px solid #dccbb1;
        }

        h2 {
            font-family: 'MedievalSharp', cursive;
            color: var(--primary-dark);
            margin-top: 0;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 5px;
            font-size: 1.4rem;
        }

        /* Buttons */
        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }

        button {
            background-color: #fff;
            border: 1px solid var(--primary);
            color: var(--primary-dark);
            padding: 12px;
            border-radius: var(--border-radius);
            font-family: 'Lato', sans-serif;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            display: flex;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        button:hover {
            background-color: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .cost { font-size: 0.85rem; opacity: 0.8; }

        /* Log Area */
        #log-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #fff;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .log-entry {
            padding: 8px 12px;
            border-radius: 4px;
            background-color: #f9f9f9;
            border-left: 4px solid #ddd;
            animation: fadeIn 0.3s ease;
            font-size: 1rem;
            line-height: 1.5;
        }

        .log-entry.info { border-left-color: var(--primary); }
        .log-entry.success { border-left-color: #2e7d32; background-color: #e8f5e9; }
        .log-entry.warning { border-left-color: var(--accent); background-color: #ffebee; }
        .log-entry.speech { 
            font-style: italic; 
            border-left-color: #f57f17; 
            background-color: #fffde7;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Status Boxen */
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        .stat-row:last-child { border-bottom: none; }

    </style>
</head>
<body>

<div id="app">
    <header>
        <h1>üè∞ Der Text-Burgherr</h1>
        <div class="resource-bar">
            <div class="res">üí∞ <span id="ui-gold">0</span></div>
            <div class="res">üå≤ <span id="ui-wood">0</span></div>
            <div class="res">üß± <span id="ui-stone">0</span></div>
            <div class="res">üçé <span id="ui-food">0</span></div>
            <div class="res">‚ù§Ô∏è <span id="ui-pop">0</span></div>
        </div>
    </header>

    <main>
        <aside>
            <h2>Bauwesen</h2>
            <div class="btn-group">
                <button onclick="Game.build('woodcutter')">
                    <span>Holzf√§ller</span>
                    <span class="cost">15üí∞</span>
                </button>
                <button onclick="Game.build('quarry')">
                    <span>Steinbruch</span>
                    <span class="cost">50üí∞</span>
                </button>
                <button onclick="Game.build('farm')">
                    <span>Apfelplantage</span>
                    <span class="cost">30üí∞</span>
                </button>
                <button onclick="Game.build('house')">
                    <span>H√ºtte</span>
                    <span class="cost">10üå≤</span>
                </button>
            </div>

            <h2>Schatzkammer</h2>
            <div class="btn-group">
                <button onclick="Game.changeTax(1)">Steuern erh√∂hen</button>
                <button onclick="Game.changeTax(-1)">Steuern senken</button>
            </div>
        </aside>

        <section id="log-area"></section>

        <aside class="right">
            <h2>Status</h2>
            <div class="stat-row"><strong>Tag:</strong> <span id="ui-day">1</span></div>
            <div class="stat-row"><strong>Bewohner:</strong> <span id="ui-pop-count">0/0</span></div>
            <div class="stat-row"><strong>Steuersatz:</strong> <span id="ui-tax">0</span></div>
            <br>
            <h2>Geb√§ude</h2>
            <div class="stat-row">Holzf√§ller: <span id="count-woodcutter">0</span></div>
            <div class="stat-row">Steinbr√ºche: <span id="count-quarry">0</span></div>
            <div class="stat-row">Farmen: <span id="count-farm">0</span></div>
            <div class="stat-row">H√ºtten: <span id="count-house">0</span></div>
        </aside>
    </main>
</div>

<script>
    // --- KONFIGURATION (Balancing) ---
    const Config = {
        tickRate: 2000, // Alle 2 Sekunden ein "Tag"
        buildings: {
            woodcutter: { costGold: 15, costWood: 0, prodWood: 2, name: "Holzf√§ller" },
            quarry:     { costGold: 50, costWood: 20, prodStone: 1, name: "Steinbruch" },
            farm:       { costGold: 30, costWood: 10, prodFood: 4, name: "Apfelplantage" },
            house:      { costGold: 0, costWood: 10, capacity: 5, name: "H√ºtte" }
        }
    };

    // --- SPIEL ZUSTAND (State) ---
    const State = {
        day: 1,
        gold: 100,
        wood: 50,
        stone: 0,
        food: 50,
        popularity: 100,
        population: 5,
        maxPopulation: 10, // Startkapazit√§t (durch Burg)
        taxLevel: 0,
        
        buildings: {
            woodcutter: 0,
            quarry: 0,
            farm: 0,
            house: 0
        }
    };

    // --- GAME ENGINE ---
    const Game = {
        init: function() {
            this.log("Willkommen, Sire! Eure L√§ndereien warten auf Bewirtschaftung.", "speech");
            this.updateUI();
            // Startet den Loop
            setInterval(this.tick.bind(this), Config.tickRate);
        },

        // Der "Herzschlag" des Spiels (passiert alle X Sekunden)
        tick: function() {
            State.day++;

            // 1. Produktion
            const woodProd = State.buildings.woodcutter * Config.buildings.woodcutter.prodWood;
            const stoneProd = State.buildings.quarry * Config.buildings.quarry.prodStone;
            const foodProd = State.buildings.farm * Config.buildings.farm.prodFood;

            State.wood += woodProd;
            State.stone += stoneProd;
            State.food += foodProd;

            // 2. Konsum (Nahrung)
            const foodConsumption = State.population; 
            if (State.food >= foodConsumption) {
                State.food -= foodConsumption;
            } else {
                State.food = 0;
                this.log("Sire! Das Volk hungert!", "warning");
                State.popularity -= 5;
            }

            // 3. Steuern
            if (State.taxLevel > 0) {
                const taxIncome = State.population * State.taxLevel;
                State.gold += taxIncome;
                State.popularity -= (State.taxLevel * 2); // Steuern machen unbeliebt
            }

            // 4. Bev√∂lkerungswachstum (einfach)
            if (State.popularity > 80 && State.population < State.maxPopulation && State.food > 10) {
                State.population++;
                this.log("Ein neuer Siedler hat die Burg erreicht.", "success");
            }

            // Zuf√§llige Events (kleine Chance)
            if (Math.random() < 0.1) this.randomEvent();

            this.updateUI();
        },

        // Geb√§ude bauen
        build: function(type) {
            const building = Config.buildings[type];
            
            // Kosten pr√ºfen
            if (State.gold >= building.costGold && State.wood >= (building.costWood || 0)) {
                // Bezahlen
                State.gold -= building.costGold;
                State.wood -= (building.costWood || 0);
                
                // Bauen
                State.buildings[type]++;
                
                // Spezialeffekte
                if (type === 'house') State.maxPopulation += building.capacity;

                this.log(`${building.name} errichtet.`, "success");
                this.updateUI();
            } else {
                this.log("Nicht gen√ºgend Ressourcen, Mylord.", "warning");
            }
        },

        changeTax: function(amount) {
            State.taxLevel += amount;
            if (State.taxLevel < 0) State.taxLevel = 0;
            this.log(`Steuersatz auf ${State.taxLevel} gesetzt.`, "info");
            this.updateUI();
        },

        randomEvent: function() {
            const events = [
                "Ein B√§r wurde im Wald gesichtet!",
                "Der Narr hat einen Witz gemacht, das Volk lacht.",
                "Ein Gewitter zieht auf."
            ];
            const text = events[Math.floor(Math.random() * events.length)];
            this.log(text, "speech");
        },

        // UI Aktualisierung
        updateUI: function() {
            // Ressourcen
            document.getElementById('ui-gold').innerText = Math.floor(State.gold);
            document.getElementById('ui-wood').innerText = Math.floor(State.wood);
            document.getElementById('ui-stone').innerText = Math.floor(State.stone);
            document.getElementById('ui-food').innerText = Math.floor(State.food);
            document.getElementById('ui-pop').innerText = Math.floor(State.popularity);
            
            // Status Panel
            document.getElementById('ui-day').innerText = State.day;
            document.getElementById('ui-pop-count').innerText = `${State.population} / ${State.maxPopulation}`;
            document.getElementById('ui-tax').innerText = State.taxLevel;

            // Geb√§ude Counts
            document.getElementById('count-woodcutter').innerText = State.buildings.woodcutter;
            document.getElementById('count-quarry').innerText = State.buildings.quarry;
            document.getElementById('count-farm').innerText = State.buildings.farm;
            document.getElementById('count-house').innerText = State.buildings.house;
        },

        // Log-System
        log: function(text, type = 'info') {
            const logEl = document.getElementById('log-area');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.innerHTML = `<strong>Tag ${State.day}:</strong> ${text}`;
            logEl.appendChild(entry);
            logEl.scrollTop = logEl.scrollHeight;
        }
    };

    // Spiel starten
    Game.init();
</script>

</body>
</html>
